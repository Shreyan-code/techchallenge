{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user profile in the PetConnect application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user profile."
        },
        "userName": {
          "type": "string",
          "description": "The user's username."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "firstName": {
          "type": "string",
          "description": "The user's first name."
        },
        "lastName": {
          "type": "string",
          "description": "The user's last name."
        },
        "profilePicture": {
          "type": "string",
          "description": "URL of the user's profile picture.",
          "format": "uri"
        },
        "bio": {
          "type": "string",
          "description": "A short biography or description of the user."
        },
        "petIds": {
          "type": "array",
          "description": "References to Pets. (Relationship: User 1:N Pet)",
          "items": {
            "type": "string"
          }
        },
        "onboardingCompleted": {
          "type": "boolean",
          "description": "Whether the user has completed the onboarding process."
        }
      },
      "required": [
        "id",
        "userName",
        "email",
        "firstName",
        "lastName"
      ]
    },
    "Pet": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Pet",
      "type": "object",
      "description": "Represents a pet in the PetConnect application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the pet."
        },
        "ownerId": {
          "type": "string",
          "description": "The UID of the user who owns the pet."
        },
        "name": {
          "type": "string",
          "description": "The pet's name."
        },
        "breed": {
          "type": "string",
          "description": "The pet's breed."
        },
        "age": {
          "type": "string",
          "description": "The pet's age."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of the pet's profile picture.",
          "format": "uri"
        },
        "bio": {
          "type": "string",
          "description": "A short biography or description of the pet."
        }
      },
      "required": [
        "id",
        "ownerId",
        "name",
        "breed"
      ]
    },
    "Post": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Post",
      "type": "object",
      "description": "Represents a user-generated post in the community feed.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the post."
        },
        "authorId": {
          "type": "string",
          "description": "The UID of the user who created the post."
        },
        "content": {
          "type": "string",
          "description": "The text content of the post."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of an image attached to the post.",
          "format": "uri"
        },
        "createdAt": {
          "type": "string",
          "description": "The timestamp when the post was created.",
          "format": "date-time"
        },
        "likes": {
          "type": "array",
          "description": "An array of user UIDs who have liked the post.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "authorId",
        "content",
        "createdAt"
      ]
    },
    "Comment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Comment",
      "type": "object",
      "description": "Represents a comment on a post.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the comment."
        },
        "authorId": {
          "type": "string",
          "description": "The UID of the user who wrote the comment."
        },
        "postId": {
          "type": "string",
          "description": "The ID of the post this comment belongs to."
        },
        "content": {
          "type": "string",
          "description": "The text content of the comment."
        },
        "createdAt": {
          "type": "string",
          "description": "The timestamp when the comment was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "authorId",
        "postId",
        "content",
        "createdAt"
      ]
    },
    "Conversation": {
      "title": "Conversation",
      "description": "Represents a private chat between two or more users.",
      "type": "object",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the conversation." },
        "participants": { "type": "array", "items": { "type": "string" }, "description": "Array of user UIDs participating in the conversation." },
        "participantDetails": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "uid": { "type": "string" },
              "userName": { "type": "string" },
              "profilePicture": { "type": "string", "format": "uri" }
            },
            "required": ["uid", "userName"]
          },
          "description": "Denormalized data of participants for easy display."
        },
        "lastMessage": { "type": "string", "description": "The content of the most recent message." },
        "lastMessageTimestamp": { "type": "string", "format": "date-time", "description": "Timestamp of the last message." }
      },
      "required": ["id", "participants", "participantDetails"]
    },
    "Message": {
      "title": "Message",
      "description": "Represents a single message within a conversation.",
      "type": "object",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the message." },
        "conversationId": { "type": "string", "description": "The ID of the conversation this message belongs to." },
        "senderId": { "type": "string", "description": "The UID of the user who sent the message." },
        "content": { "type": "string", "description": "The text content of the message." },
        "createdAt": { "type": "string", "format": "date-time", "description": "Timestamp when the message was sent." }
      },
      "required": ["id", "conversationId", "senderId", "content", "createdAt"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": { "$ref": "#/backend/entities/UserProfile" },
          "description": "Stores user profile data, using the Firebase Auth UID as the document ID.",
          "params": [{ "name": "userId", "description": "The Firebase Auth UID of the user." }]
        }
      },
      {
        "path": "pets/{petId}",
        "definition": {
          "entityName": "Pet",
          "schema": { "$ref": "#/backend/entities/Pet" },
          "description": "Stores individual pet data.",
          "params": [{ "name": "petId", "description": "The unique ID of the pet." }]
        }
      },
      {
        "path": "posts/{postId}",
        "definition": {
          "entityName": "Post",
          "schema": { "$ref": "#/backend/entities/Post" },
          "description": "Stores all user-generated posts.",
          "params": [{ "name": "postId", "description": "The unique ID of the post." }]
        }
      },
      {
        "path": "posts/{postId}/comments/{commentId}",
        "definition": {
          "entityName": "Comment",
          "schema": { "$ref": "#/backend/entities/Comment" },
          "description": "Stores comments for a specific post.",
          "params": [
            { "name": "postId", "description": "The unique ID of the post." },
            { "name": "commentId", "description": "The unique ID of the comment." }
          ]
        }
      },
       {
        "path": "conversations/{conversationId}",
        "definition": {
          "entityName": "Conversation",
          "schema": { "$ref": "#/backend/entities/Conversation" },
          "description": "Stores metadata for a conversation between users.",
          "params": [{ "name": "conversationId", "description": "The unique ID of the conversation." }]
        }
      },
      {
        "path": "conversations/{conversationId}/messages/{messageId}",
        "definition": {
          "entityName": "Message",
          "schema": { "$ref": "#/backend/entities/Message" },
          "description": "Stores messages for a specific conversation.",
          "params": [
            { "name": "conversationId", "description": "The unique ID of the conversation." },
            { "name": "messageId", "description": "The unique ID of the message." }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed for a social media application for pets. It includes top-level collections for users, pets, posts, and conversations to allow for scalable queries. Comments and messages are stored as subcollections within their respective parent documents (posts and conversations) to maintain a logical hierarchy and enable efficient retrieval. Denormalized data in conversations (participantDetails) is used to avoid extra lookups when displaying conversation lists."
  }
}